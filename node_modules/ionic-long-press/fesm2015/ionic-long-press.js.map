{"version":3,"file":"ionic-long-press.js","sources":["ng://ionic-long-press/directives/long-press.directive.ts","ng://ionic-long-press/long-press.module.ts","ng://ionic-long-press/ionic-long-press.ts"],"sourcesContent":["import { Directive, ElementRef, EventEmitter, Input, NgZone, OnDestroy, OnInit, Output } from '@angular/core'\nimport * as Hammer from 'hammerjs'\n\n// const LONG_PRESS_DEFAULT_TIMEOUT = 500;\n\n// const MIN_LONG_PRESS_TIMEOUT = 40;\n\n@Directive({\n  selector: '[ion-long-press]',\n})\nexport class LongPressDirective implements OnInit, OnDestroy {\n  @Input() interval: number\n\n  @Output() pressed: EventEmitter<any> = new EventEmitter()\n  @Output() longPressed: EventEmitter<any> = new EventEmitter()\n  @Output() pressEnded: EventEmitter<any> = new EventEmitter()\n\n  private readonly el: HTMLElement\n  private _hammer: HammerManager\n  private int: number\n\n  constructor(public zone: NgZone, el: ElementRef) {\n    this.el = el.nativeElement\n  }\n\n  ngOnInit(): void {\n    if (!this.interval) this.interval = 500\n    if (this.interval < 40) {\n      throw new Error(\n        \"A limit of 40ms is imposed so you don't destroy device performance. If you need less than a 40ms interval, please file an issue explaining your use case.\"\n      )\n    }\n\n    this._hammer = new Hammer.Manager(this.el, {\n      recognizers: [[Hammer.Pan, { direction: Hammer.DIRECTION_VERTICAL }], [Hammer.Press], [Hammer.Tap]],\n    })\n\n    this._hammer.on('pan', (e: any) => {\n      this.onPressEnd()\n    })\n\n    this._hammer.on('press', (e: any) => {\n      this.pressed.emit(e)\n      this.clearInt()\n      this.int = setInterval(() => {\n        this.longPressed.emit()\n      }, this.interval) as any\n    })\n\n    this._hammer.on('pressup', (e: any) => {\n      this.onPressEnd()\n    })\n\n    this._hammer.on('release', (e: any) => {\n      this.onPressEnd()\n    })\n\n    this.el.addEventListener('mouseleave', (e: any) => {\n      this.onPressEnd()\n    })\n\n    this.el.addEventListener('mouseout', (e: any) => {\n      this.onPressEnd()\n    })\n  }\n\n  clearInt(): void {\n    if (this.int !== undefined) {\n      clearInterval(this.int)\n      this.int = undefined\n    }\n  }\n\n  onPressEnd(): void {\n    this.clearInt()\n    this.pressEnded.emit()\n  }\n\n  ngOnDestroy(): void {\n    this.onPressEnd()\n    if (this._hammer) {\n      this._hammer.destroy()\n      this._hammer = null\n    }\n  }\n}\n","import { CommonModule } from '@angular/common'\nimport { NgModule } from '@angular/core'\nimport { LongPressDirective } from './directives/long-press.directive'\n\n@NgModule({\n  imports: [CommonModule],\n  declarations: [LongPressDirective],\n  exports: [LongPressDirective],\n})\nexport class LongPressModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":["Hammer.Manager","Hammer.Pan","Hammer.DIRECTION_VERTICAL","Hammer.Press","Hammer.Tap","tslib_1.__decorate"],"mappings":"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"}